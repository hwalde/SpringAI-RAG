<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout}">
<head>
    <meta charset="UTF-8">
    <title>Ask Question</title>
</head>
<body>
<div layout:fragment="content">
    <div class="p-4 md:p-6 space-y-6">
        <!-- Question Form -->
        <div class="bg-white shadow rounded-lg p-4">
            <form id="query-form">
                <label for="question-input" class="block text-sm font-medium text-gray-700 mb-1">Your Question:</label>
                <input type="text" id="question-input" name="question" required class="w-full rounded-md border-gray-300 shadow-sm focus:ring-indigo-500 focus:border-indigo-500" list="question-suggestions" autocomplete="off">
                <datalist id="question-suggestions">
                    <!-- Auto-completion suggestions will be populated here -->
                </datalist>
                <span id="question-error" class="text-red-600 text-sm mt-1 hidden">Question cannot be empty.</span>
                <button type="submit" id="ask-button" class="mt-4 inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition duration-150 ease-in-out active:scale-95 disabled:opacity-50">Ask Question</button>
                <div id="query-error-alert" class="hidden bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md mt-4" role="alert">An error occurred while processing your question.</div>
            </form>
        </div>

        <!-- Display Areas -->
        <div id="prompt-display" class="bg-white shadow rounded-lg p-4 hidden">
            <h3 class="text-lg font-medium text-gray-900 mb-2">Sent Prompt</h3>
            <pre id="prompt-content" class="bg-gray-50 border rounded-md p-3 font-mono text-sm overflow-auto whitespace-pre-wrap break-words">Prompt content will appear here...</pre>
        </div>

        <div id="raw-response-display" class="bg-white shadow rounded-lg p-4 hidden">
            <h3 class="text-lg font-medium text-gray-900 mb-2">LLM Response (Raw XML)</h3>
            <pre id="raw-response-content" class="bg-gray-50 border rounded-md p-3 font-mono text-sm overflow-auto whitespace-pre-wrap break-words">Raw XML response will appear here...</pre>
        </div>

        <div id="answer-display" class="bg-white shadow rounded-lg p-4 hidden">
            <h3 class="text-lg font-medium text-gray-900 mb-2">Formatted Answer</h3>
            <div id="answer-content" class="text-gray-800 space-y-2">Formatted answer will appear here...</div>
        </div>

        <div id="sources-display" class="bg-white shadow rounded-lg p-4 hidden">
            <h3 class="text-lg font-medium text-gray-900 mb-2">Sources</h3>
            <div id="sources-content" class="text-gray-800 space-y-2">Sources will appear here...</div>
        </div>
        <script th:src="@{/js/query.js}" defer></script>
    </div>
</div>
</body>
</html>
